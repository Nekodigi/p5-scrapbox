# 50以上の生成アート作品を集めたインタラクティブギャラリー「p5-scrapbox」を作りました

[メインビジュアル：ギャラリーのトップページのスクリーンショットをここに入れてください]

数年にわたってp5.jsで様々な実験的な作品を作ってきましたが、それらは個別のファイルとして散在していました。過去に作ったパーティクルシステムやフラクタルの実装を見返したいとき、毎回ファイルを探すのが面倒でした。

そこで、YouTube風のインターフェースで作品を整理し、誰でも簡単にアクセスできるギャラリーを作ることにしました。

[:contents]

### なぜ作ったのか

生成アートやクリエイティブコーディングの分野では、素晴らしい作品が日々生まれていますが、それらを体系的に学べる場所は意外と少ないのが現状です。特に、実際に動くコードと一緒に学べるリソースは限られています。

私自身、p5.jsを学び始めた頃は、様々なサイトやGitHubリポジトリを巡回して、参考になるコードを探していました。しかし、多くの場合、コードだけがポツンと置かれていて、どのような動作をするのか、どのような原理で動いているのかを理解するのに時間がかかりました。

また、自分で作った作品も、時間が経つと「あの時作ったあのエフェクト、どうやって実装したんだっけ？」と忘れてしまうことがよくありました。フォルダの奥深くに埋もれたスケッチファイルを一つ一つ開いて確認するのは、非効率的でした。

これらの経験から、以下の要件を満たすギャラリーを作ることにしました：

1. **即座に動作を確認できる** - サムネイルをクリックするだけで、フルスクリーンで作品を体験できる
2. **コードがすぐに見られる** - GitHubと連携し、各作品のソースコードにワンクリックでアクセス
3. **体系的に整理されている** - カテゴリ分けされ、検索可能で、似た作品を見つけやすい
4. **インタラクティブ** - ただ見るだけでなく、パラメータを調整して動作を理解できる

### デモ

[https://nekodigi.github.io/p5-scrapbox/:embed:cite]

実際に動作するギャラリーはこちらから体験できます。

### 技術的な実装の詳細

[ギャラリーグリッドのスクリーンショットをここに入れてください]

このプロジェクトで最も苦労したのは、50以上の作品を一つのサイトでスムーズに動作させることでした。単純に全てのスケッチを読み込むと、初期ロード時間が10秒以上かかってしまいます。

#### 動的インポートによる遅延読み込み

最初は全ての作品のJavaScriptファイルをHTMLに直接読み込んでいましたが、これでは初期ロードが重すぎました。そこで、ES6の動的インポート機能を使って、ユーザーが実際に見たい作品だけを読み込む仕組みに変更しました。

具体的には、ギャラリーページには作品のメタデータ（タイトル、説明、カテゴリ）だけを持たせ、サムネイルをクリックした時点で初めて対応するスケッチファイルを読み込みます。この変更により、初期ロード時間を1秒以下に短縮できました。

#### サムネイルの自動生成システム

[サムネイル生成の様子のスクリーンショットをここに入れてください]

各作品のサムネイルを手動で作成するのは現実的ではありません。50作品分のスクリーンショットを撮って、適切なサイズにリサイズして...という作業は、新しい作品を追加するたびに発生してしまいます。

そこで、p5.jsのオフスクリーンキャンバス機能を活用しました。各スケッチを小さなキャンバス（320×180ピクセル）で数フレーム実行し、適切なタイミングでキャプチャを取得します。アニメーション作品の場合は、30フレーム目あたりでキャプチャすることで、動きの特徴が表れた瞬間を捉えることができます。

この方法の最大の利点は、作品のコードを更新すると自動的にサムネイルも更新されることです。メンテナンスの手間が大幅に削減されました。

### 作品カテゴリの詳細

#### パーティクルシステム - 集団の振る舞いから生まれる美

[パーティクル作品の例のスクリーンショットをここに入れてください]

パーティクルシステムは、個々の粒子の単純なルールから、複雑で美しいパターンが生まれる様子を観察できます。

「Gravity Wells」では、画面上に配置された複数の重力源が粒子を引き寄せます。それぞれの重力源は異なる質量を持ち、粒子は全ての重力源からの影響を同時に受けます。結果として、粒子は予測不可能な軌跡を描きながら、時には一つの重力源の周りを回り、時には別の重力源に捕まって軌道を変えます。この作品の面白さは、決定論的な物理法則に従っているにも関わらず、軌跡が非常に複雑になることです。

「Swarm Intelligence」は、鳥の群れや魚の群れの動きを再現した作品です。Craig Reynoldsが提唱したボイドアルゴリズムを実装しており、各個体は「近すぎる仲間から離れる」「周囲の仲間と同じ方向に進む」「群れの中心に向かう」という3つの単純なルールだけで動いています。これらのルールから、まるで意思を持った集団のような、有機的で美しい動きが生まれます。

「Particle Flow Field」では、Perlinノイズを使って見えない流れ場を生成し、粒子がその流れに沿って動きます。時間とともに流れ場自体も変化するため、粒子の軌跡は常に新しいパターンを描き続けます。まるで風に吹かれる砂や、水流に流される墨のような、自然界でよく見られる現象を再現しています。

#### フラクタル - 無限の複雑さと自己相似性

[フラクタル作品の例のスクリーンショットをここに入れてください]

フラクタルカテゴリでは、数学的な美しさを探求できます。フラクタルの最大の特徴は「自己相似性」、つまりどんなに拡大しても同じようなパターンが現れることです。

「Mandelbrot Explorer」は、おそらく最も有名なフラクタルであるマンデルブロ集合を探索できる作品です。複素平面上の各点で反復計算を行い、その結果が発散するかどうかで色を決定します。マウスホイールでズームすると、境界付近に無限に複雑な構造が現れます。10倍、100倍、1000倍と拡大しても、新しい構造が次々と現れ、時には元の形に似たミニチュアのマンデルブロ集合も発見できます。

「Julia Set Morphing」では、ジュリア集合がリアルタイムで変形する様子を観察できます。ジュリア集合はマンデルブロ集合と密接な関係があり、パラメータを少し変えるだけで全く異なる形状になります。この作品では、マウスの位置に応じてパラメータが変化し、フラクタルが流動的に変形します。数学的な厳密さと芸術的な美しさが融合した作品です。

「L-System Garden」は、植物の成長をモデル化したL-Systemを使った作品です。「F」は前進、「+」は右回転、「-」は左回転といった単純な文字列の規則を再帰的に適用することで、驚くほど複雑で自然な植物の形が生成されます。世代を重ねるごとに枝分かれが増え、最終的には本物の木や草のような形状が現れます。

#### 物理シミュレーション - 現実世界の法則をコードで再現

[物理シミュレーションの例のスクリーンショットをここに入れてください]

物理シミュレーションカテゴリでは、現実世界の物理法則をプログラムで再現しています。

「Cloth Simulation」は、布の動きをリアルタイムでシミュレートする作品です。布を構成する各点は、隣接する点とバネで接続されていると考えます。重力によって下に引っ張られ、バネの張力によって形を保ち、空気抵抗によって動きが減衰します。マウスで布を掴んで引っ張ると、その動きが波として周囲に伝わり、まるで本物の布のような挙動を見せます。

「Fluid Dynamics」では、流体の動きをナビエ・ストークス方程式を簡略化して再現しています。マウスをドラッグすると、その動きに応じて流体が撹拌され、渦や乱流が発生します。色素を加えることで、流体の動きを可視化しています。コーヒーにミルクを注いだときの混ざり方や、煙の動きなど、日常的に目にする流体現象を再現できます。

「Pendulum Chaos」は、二重振り子のカオス的な動きを表現した作品です。初期条件をほんの少し変えるだけで、全く異なる軌跡を描くカオスの典型例です。エネルギー保存則に従いながらも、予測不可能な動きをする様子は、決定論的カオスの不思議さを体感できます。

### インタラクティブ性の実装

[インタラクティブ操作の様子のGIFまたはスクリーンショットをここに入れてください]

各作品には、その特性に応じたインタラクティブ要素を実装しています。

マウス操作では、カーソルの位置や動きに反応する要素を多く取り入れました。パーティクル系の作品では、マウスが引力源や斥力源として機能し、粒子の動きに影響を与えます。フラクタル系では、マウスホイールでのズームやドラッグでの移動により、無限の世界を探索できます。

キーボード操作も重要な要素です。スペースキーで一時停止/再生、Rキーでリセット、数字キーで表示モードの切り替えなど、統一的な操作体系を心がけました。また、一部の作品では、矢印キーでパラメータを調整できるようにしています。

タッチデバイスへの対応も考慮しました。ピンチ操作でのズーム、スワイプでの移動、タップでのインタラクションなど、モバイルデバイスでも快適に操作できるようにしています。

### パフォーマンス最適化の工夫

50以上の作品を扱う上で、様々な最適化を行いました。

まず、Canvas要素の再利用です。作品を切り替えるたびに新しいCanvas要素を作成すると、メモリリークの原因になります。そこで、一つのCanvas要素を使い回し、作品切り替え時には完全にクリーンアップしてから次の作品を読み込むようにしました。

バックグラウンドでの処理も重要です。ブラウザのタブが非アクティブになったときは、RequestAnimationFrameが自動的に停止しますが、一部の処理（音声処理など）は継続してしまいます。そこで、Page Visibility APIを使用して、タブが非表示になったら全ての処理を一時停止するようにしました。

重い計算処理については、可能な限り最適化を行いました。例えば、フラクタルの計算では、画面に表示されている部分だけを計算し、ズームアウト時は解像度を下げて計算量を削減しています。また、対称性を利用して計算量を半分にするなどの工夫も行っています。

### 学んだことと今後の展望

このプロジェクトを通じて、作品を整理し、アクセスしやすくすることの重要性を改めて認識しました。どんなに素晴らしい作品でも、見つけてもらえなければ意味がありません。

現在は私が作った作品のみを掲載していますが、将来的にはコミュニティ機能を追加したいと考えています。他のクリエイターが自分の作品を投稿し、お互いにインスピレーションを得られる場所にしたいです。

また、教育的な側面も強化したいと思っています。各アルゴリズムの詳細な解説、初心者向けのチュートリアル、段階的に難易度が上がる練習問題などを用意することで、生成アートの入門から応用まで学べるプラットフォームを目指します。

### 開発者向け情報

ソースコードは全てGitHubで公開しています。

[https://github.com/Nekodigi/p5-scrapbox:embed:cite]

新しい作品を追加したい方は、GitHubのREADMEに詳しい手順を記載していますので、ぜひ参考にしてください。基本的なテンプレートに従って作品を作成すれば、自動的にギャラリーシステムに統合されます。

### まとめ

p5-scrapboxは、私自身の学習の記録であり、同時に生成アートコミュニティへの貢献でもあります。コードを整理し、アクセスしやすくすることで、より多くの人が生成アートの魅力に触れられるようになればと思います。

このギャラリーが、あなたの創造性を刺激し、新しいアイデアのきっかけになれば幸いです。そして、もしインスピレーションを受けたら、ぜひあなた自身の作品も作って、プルリクエストを送ってください。

生成アートの世界は、まだまだ探求の余地がたくさんあります。一緒に、コードで描く新しい表現を見つけていきましょう。